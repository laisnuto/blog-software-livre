---
title: "Pacote Debian"
description: "Empacotamento do Shell para o Debian."
image: "../../public/blogs/debian_pack.svg"
publishedAt: "2024-06-06"
updatedAt: "2024-06-06"
author: "laisnuto"
isPublished: true
tags:

 - debian
 - set up
 - packaging
---

Como foi relatado em post anteriores, tive alguns problemas com a configuração do Debian e minha dupla, Jorge Harrison, teve dengue durante aquela aula, então estávamos um pouco atrasados nessa etapa do empacotamento mas queriamos passar pela experiência
Por outro lado, como nos estávamos fazendo em paralelo as contribuições para o projeto Nushell e já estavamos relativamente adiantados nessas contribuições do projeto final, decidimos usar uma das aulas para poder focar na etapa do empacotamento e assim passar pela experiência completa de MAC0470
Como além de nós, o Thiago Duvanel também estava contribuindo com o Nushell e estava adiantado, ele se juntou com a gente e nos decidimos criar um pacote do Nushell para o Debian. Já tínhamos uma boa base teórica das aulas e tutoriais, mas na prática sempre surgem desafios inesperados. 

## Iniciando Máquina Virtual
Para garantir um ambiente padronizado e com as versões mais recentes dos pacotes, precisariamos de uma máquina virtual com o Debian Testing. De início, cada um tentou fazer no seu respectivo computador, mas eu e o Jorge na hora que tentamos setar uma vm tivemos problemas com a senha, erramos o comando de mudar a senha e no fim, como o Thiago já estava com a vm prontinha e configurada, só nos juntamos um do lado do outro e fizemos juntos pelo computador dele.
Com a VM configurada, seguimos instalando todas as dependências necessárias para o processo de empacotamento, conforme indicado nos tutoriais que estávamos seguindo.

## Criando o Pacote para o Nushell
Com o ambiente pronto, nossa primeira tentativa foi com o dh-cargo, uma ferramenta específica para empacotamento de projetos em Rust. Mas não encontramos muito material e documentação sobre. 
Decidimos então experimentar o debcargo, usando um container com Debian Testing para garantir a consistência do ambiente. Instalamos todas as dependências, clonamos o repositório do debcargo-conf e executamos o script ./update.sh nu


## Ajustando os Arquivos Necessários
Os principais arquivos que precisávamos ajustar estavam na pasta debian/. Isso incluía o copyright, onde listamos todas as licenças usadas no projeto, o control, onde especificamos as dependências, e o changelog, onde registramos as mudanças desde a última versão. Com esses arquivos ajustados, executamos o script ./build.sh nu para gerar o arquivo .dsc.

## O Problema das Dependências
Ao tentar construir o pacote final, o principal problema foi um número gigante de dependências que precisavam ser empacotadas. Essas dependências são essenciais para o funcionamento do Nushell, mas empacotá-las todas exigiria um esforço que fugia do escopo da disciplina e muito tempo de trabalho.


## Reflexões Sobre a Experiência
Apesar dos desafios e das dificuldades encontradas, essa experiência foi legal já que aprendemos muito sobre o processo de empacotamento para o Debian, desde a preparação do ambiente até a resolução de problemas com dependências. Além disso, essa experiência certamente nos fez valorizar ainda mais os pacotes já disponíveis nos repositórios de distribuição.

