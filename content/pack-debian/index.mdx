---
title: "Pacote Debian"
description: "Empacotamento do Shell para o Debian."
image: "../../public/blogs/debian_pack.svg"
publishedAt: "2024-06-06"
updatedAt: "2024-06-06"
author: "laisnuto"
isPublished: true
tags:

 - debian
 - set up
 - packaging
---

Como eu e minha dupla estávamos fazendo em paralelo as contribuições para o projeto Nushell, resolvemos nos desafiar ainda mais e empacotar o shell para o Debian. Já tínhamos uma boa base teórica das aulas e tutoriais, mas na prática sempre surgem desafios inesperados. Meu nome é Laís, e junto com meus colegas Jorge e Thiago, enfrentamos essa missão com muita determinação. Aqui vou compartilhar a nossa jornada, abordando os principais passos e obstáculos que encontramos pelo caminho.

### Iniciando Máquina Virtual
Para garantir um ambiente padronizado e com as versões mais recentes dos pacotes, iniciamos criando uma máquina virtual com o Debian Testing. Utilizamos o Virt Manager, ferramenta já familiar para nós desde o começo da disciplina. Com a VM configurada, seguimos instalando todas as dependências necessárias para o processo de empacotamento, conforme indicado nos tutoriais que estávamos seguindo.

### Criando o Pacote para o Nushell
Com o ambiente pronto, era hora de colocar a mão na massa. Nossa primeira tentativa foi com o dh-cargo, uma ferramenta específica para empacotamento de projetos em Rust. No entanto, não encontramos suporte suficiente para seguir adiante com essa ferramenta. Decidimos então experimentar o debcargo, que se mostrou mais adequado para nossas necessidades.

### Preparando o Setup
Optamos por utilizar um container com Debian Testing para garantir a consistência do ambiente. Instalamos todas as dependências listadas no tutorial, clonamos o repositório do debcargo-conf e executamos o script ./update.sh nu para obter o código fonte do Nushell.


###Ajustando os Arquivos Necessários
Os principais arquivos que precisávamos ajustar estavam na pasta debian/. Isso incluía o copyright, onde listamos todas as licenças usadas no projeto, o control, onde especificamos as dependências, e o changelog, onde registramos as mudanças desde a última versão. Com esses arquivos ajustados, executamos o script ./build.sh nu para gerar o arquivo .dsc.

### O Problema das Dependências
Ao tentar construir o pacote final, nos deparamos com um grande obstáculo: um vasto número de dependências que precisavam ser empacotadas. A lista incluía desde o rustc:native até diversas bibliotecas específicas do Rust. Essas dependências são essenciais para o funcionamento do Nushell, mas empacotá-las todas exigiria um esforço colossal e muito tempo de trabalho.


### Reflexões Sobre a Experiência
Apesar dos desafios e das dificuldades encontradas, essa experiência foi extremamente enriquecedora. Aprendemos muito sobre o processo de empacotamento para o Debian, desde a preparação do ambiente até a resolução de problemas com dependências. Foi gratificante ver como cada etapa contribui para a criação de um pacote funcional, e essa experiência certamente nos fez valorizar ainda mais os pacotes já disponíveis nos repositórios de distribuição.

Empacotar um projeto complexo como o Nushell para o Debian nos mostrou a importância da colaboração e do conhecimento compartilhado. Embora não tenhamos conseguido concluir todas as etapas, o aprendizado foi imenso e nos deixou mais preparados para futuros desafios.


Resumo:
1. Passando pelos primeiros passos da disciplina:
-O que é softaware livre e licenças
- Palestra sobre Kernel e contribuição
- Palestra de licenças com Nelson
- Workshop configuração de ambiente com Kernel
- Contribuição do Kernel
- Aula do kw contribuição kw
- Empacotamento debian
- Nullshel
- 

tinha faltado botar a smart completion do --alert do kw

foi setar uma vm, mas o thiago tinha uma vm pronta